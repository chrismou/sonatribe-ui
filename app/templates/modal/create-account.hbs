{{#em-modal-form configName="bs" id="signup" in-async=async}}
{{#em-modal-title}}
<!--optional toggler to close the opened modal-->
{{#em-modal-toggler class="close"}}x{{/em-modal-toggler}}
<h4 class="modal-title">signup</h4>
{{/em-modal-title}}
<!--the content of the modal...-->
{{#em-modal-body}}
{{#unless complete}}

{{#unless hasAuthOptions}}
<a {{bind-attr href=facebook_login_url}}>facebook</a>
<a {{bind-attr href=twitter_login_url}}>twitter</a>
{{/unless}}

{{#if async}}
Submitting, please wait...
{{/if}}

<div>
  <form id="form-register" action="https://sonatribe-api.herokuapp.com/api/register" method="POST">
    {{service-stack}}
    <table>
      <tr class="input">
        <td style="width:80px" class="label"><label for='new-account-name'>your full name</label></td>
        <td style="width:496px">
          {{text-field value=accountName id="new-account-name" autofocus="autofocus"}}
          &nbsp;
        </td>
      </tr>
      <tr class="instructions">
        <td></td>
        <td><label>username instructions</label></td>
      </tr>

      <tr class="input">
        <td class="label"><label for='new-account-email'>email</label></td>
        <td>
          {{input type="email" value=accountEmail id="new-account-email" disabled=emailValidated}}
          &nbsp;
        </td>
      </tr>
      <tr class="instructions">
        <td></td>
        <td><label>email instrutuions</label></td>
      </tr>

      <tr class="input">
        <td class="label"><label for='new-account-username'>username</label></td>
        <td>
          {{input value=accountUsername id="new-account-username" maxlength=maxUsernameLength}}
          &nbsp;
        </td>
      </tr>
      <tr class="instructions">
        <td></td>
        <td><label>username</label></td>
      </tr>

      {{#if passwordRequired}}
      <tr class="input">
        <td class="label"><label for='new-account-password'>password</label></td>
        <td>
          {{input value=accountPassword type="password" id="new-account-password" capsLockOn=capsLockOn}}
          &nbsp;
        </td>
      </tr>
      <tr class="instructions">
        <td></td>
        <td>
          <label>{{passwordInstructions}}</label>
          <div {{bind-attr class=":caps-lock-warning capsLockOn::invisible"}}><i class="fa fa-exclamation-triangle"></i> campslock</div>
        </td>
      </tr>
      {{/if}}

      <tr class="password-confirmation">
        <td><label for='new-account-password-confirmation'>confirm password</label></td>
        <td>
          {{input type="password" value=accountPasswordConfirm id="new-account-confirmation"}}
          {{input value=accountChallenge id="new-account-challenge"}}
        </td>
      </tr>

    </table>

    {{#if userFields}}
    <div class='user-fields'>
      {{#each userFields}}
      {{user-field field=field value=value}}
      {{/each}}
    </div>
    {{/if}}

    <div id='modal-alert'></div>

  </form>
</div>

{{/unless}}
{{/em-modal-body}}
<!--optional footer section of the modal, usually contains buttons-->
{{#em-modal-footer}}
{{#em-modal-toggler class="btn btn-default"}}Close{{/em-modal-toggler}}
{{/em-modal-footer}}
{{/em-modal-form}}
